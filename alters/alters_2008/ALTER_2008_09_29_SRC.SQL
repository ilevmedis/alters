CREATE TABLE SRC_SUPPLYREQUEST  (
   SUPPLYREQUESTID      NUMBER(38) NOT NULL,
   COMPANYID            NUMBER(38)  NOT NULL,
   MNEMONIC             VARCHAR2(20) NOT NULL,
   DESCR                VARCHAR2(255) NOT NULL,
   SMALLDESCR           VARCHAR2(70) NOT NULL,
   COMMENTS             VARCHAR2(200),
   BUDGET               FLOAT(126),
   RELATEDORDERID       NUMBER(38),
   RELATEDORDERFYEARID  NUMBER(38),
   EVALUATIONMETHODINDICATOR NUMBER(38) NOT NULL,
   STATUSINDICATOR      NUMBER(38),
   ISCANCELED           VARCHAR2(1) NOT NULL,
   MINSCORE             FLOAT(126),
   MAXSCORE             FLOAT(126),
   NATIONALSUPPLYCODE   VARCHAR2(20),
   RELATEDSUPPLYREQUESTID NUMBER(38),
   SELECTIONMETHODINDICATOR NUMBER(38) NOT NULL,
   REQUESTDATE          DATE
);

ALTER TABLE SRC_SUPPLYREQUEST
   ADD CONSTRAINT PK_SRC_SUPPLYREQUEST PRIMARY KEY (SUPPLYREQUESTID, COMPANYID);

ALTER TABLE SRC_SUPPLYREQUEST
   ADD CONSTRAINT INVTRANSHD_SRCSUPPLYREQ FOREIGN KEY (RELATEDORDERID, COMPANYID, RELATEDORDERFYEARID)
      REFERENCES INV_TRANSHEADER (INVTRANSHEADERID, COMPANYID, FYEARID);

ALTER TABLE SRC_SUPPLYREQUEST
   ADD CONSTRAINT SRCSUPPLYREQ_SRCSUPPLYREQ FOREIGN KEY (RELATEDSUPPLYREQUESTID, COMPANYID)
      REFERENCES SRC_SUPPLYREQUEST (SUPPLYREQUESTID, COMPANYID);

CREATE TABLE SRC_SUPPLYREQUESTITEM  (
   SUPPLYREQUESTITEMID  NUMBER(38)                      NOT NULL,
   COMPANYID            NUMBER(38)                      NOT NULL,
   LINENUM              NUMBER(38)                      NOT NULL,
   SUPPLYREQUESTID      NUMBER(38)                      NOT NULL,
   INVITEMID            NUMBER(38),
   INVITEMFYEARID       NUMBER(38),
   INVITEMMNEMONIC      VARCHAR2(20),
   INVITEMDESCR         VARCHAR2(100)                   NOT NULL,
   COMMENTS             VARCHAR2(200),
   QUA                  FLOAT(126),
   UNITOFMEASUREID      NUMBER(38)                      NOT NULL,
   UNITOFMEASUREFYEARID NUMBER(38)                      NOT NULL,
   BUDGETPRICE          FLOAT(126),
   BUDGETVALUE          FLOAT(126),
   ISASSIGNED		VARCHAR2(1) NOT NULL,
   ISRANKED		VARCHAR2(1) NOT NULL		
);

ALTER TABLE SRC_SUPPLYREQUESTITEM
   ADD CONSTRAINT PK_SRC_SUPPLYREQUESTITEM PRIMARY KEY (SUPPLYREQUESTITEMID, COMPANYID);

ALTER TABLE SRC_SUPPLYREQUESTITEM
   ADD CONSTRAINT SRCSUPPREQ_SRCSUPPREQITEM FOREIGN KEY (SUPPLYREQUESTID, COMPANYID)
      REFERENCES SRC_SUPPLYREQUEST (SUPPLYREQUESTID, COMPANYID);

ALTER TABLE SRC_SUPPLYREQUESTITEM
   ADD CONSTRAINT INV_ITEM_SRCSUPPREWITEM FOREIGN KEY (INVITEMID, COMPANYID, INVITEMFYEARID)
      REFERENCES INV_ITEM (INVITEMID, COMPANYID, FYEARID);

ALTER TABLE SRC_SUPPLYREQUESTITEM
   ADD CONSTRAINT UNITOFMEASURE_SRCSUPPREQITEM FOREIGN KEY (SUPPLYREQUESTITEMID, UNITOFMEASUREFYEARID, COMPANYID)
      REFERENCES INV_UNITOFMEASURE (UNITOFMEASUREID, COMPANYID, FYEARID);



CREATE TABLE SRC_SUPPLYOFFER  (
   SUPPLYOFFERID        NUMBER(38)  NOT NULL,
   COMPANYID            NUMBER(38)  NOT NULL,
   LINENUM              NUMBER(38)  NOT NULL,
   SUPPLYREQUESTID      NUMBER(38)  NOT NULL,
   FINTRANSPARTYID       NUMBER(38),
   FINTRANSPARTYFYEARID NUMBER(38),
   FINTRANSPARTYNAME    VARCHAR2(100) NOT NULL,
   FINTRANSPARTYTAXREGISTRATIONNO VARCHAR2(10),
   FINTRANSPARTYFAXNO   VARCHAR2(20),
   FINTRANSPARTYTELNO   VARCHAR2(20),
   OFFERDATE            DATE        NOT NULL,
   VALIDTILLDATE        DATE,
   COMMENTS             VARCHAR2(200),
   ISREJECTED           VARCHAR2(1) NOT NULL,
   REJECTIONREASONINDICATOR NUMBER(38),
   REJECTIONCOMMENTS    VARCHAR2(100)
);

ALTER TABLE SRC_SUPPLYOFFER
   ADD CONSTRAINT PK_SRC_SUPPLYOFFER PRIMARY KEY (SUPPLYOFFERID, COMPANYID);

ALTER TABLE SRC_SUPPLYOFFER
   ADD CONSTRAINT SRCSUPPREQ_SRC_SUPPOFFER FOREIGN KEY (SUPPLYREQUESTID, COMPANYID)
      REFERENCES SRC_SUPPLYREQUEST (SUPPLYREQUESTID, COMPANYID);

ALTER TABLE SRC_SUPPLYOFFER
   ADD CONSTRAINT FINTRANSPARTY_RSCSUPPOFFER FOREIGN KEY (FINTRANSPARTYID, COMPANYID, FINTRANSPARTYFYEARID)
      REFERENCES FIN_TRANSPARTY (FINTRANSPARTYID, COMPANYID, FYEARID);


CREATE TABLE SRC_SUPPLYOFFERITEM  (
   SUPPLYOFFERITEMID    NUMBER(38) NOT NULL,
   COMPANYID            NUMBER(38) NOT NULL,
   ITEMLINENUM          NUMBER(38) NOT NULL,
   SUPPLYREQUESTID      NUMBER(38) NOT NULL,
   SUPPLYOFFERID        NUMBER(38) NOT NULL,
   SUPPLYREQUESTITEMID  NUMBER(38) NOT NULL,
   OFFERDATE            DATE       NOT NULL,
   VALIDTILLDATE        DATE,
   TRANSPARTYITEMDESCR  VARCHAR2(200) NOT NULL,
   TRANSPARTYITEMCODE   VARCHAR2(20),
   INVITEMID            NUMBER(38),
   INVITEMFYEARID       NUMBER(38),
   PRICE                FLOAT(126) NOT NULL,
   DISC                 FLOAT(126),
   QUA                  FLOAT(126),
   UNITOFMEASUREID      NUMBER(38) NOT NULL,
   UNITOFMEASUREFYEARID NUMBER(38) NOT NULL,
   QUARELATION          FLOAT(126) NOT NULL,
   COMMENTS             VARCHAR2(200),
   ISREJECTED           VARCHAR2(1) NOT NULL,
   REJECTIONREASONINDICATOR NUMBER(38),
   REJECTIONCOMMENTS    VARCHAR2(100)
);

ALTER TABLE SRC_SUPPLYOFFERITEM
   ADD CONSTRAINT PK_SRC_SUPPLYOFFERITEM PRIMARY KEY (SUPPLYOFFERITEMID, COMPANYID);

ALTER TABLE SRC_SUPPLYOFFERITEM
   ADD CONSTRAINT SRCSUPPREQ_SRCSUPPOFFERITEM FOREIGN KEY (SUPPLYREQUESTID, COMPANYID)
      REFERENCES SRC_SUPPLYREQUEST (SUPPLYREQUESTID, COMPANYID);

ALTER TABLE SRC_SUPPLYOFFERITEM
   ADD CONSTRAINT SRCSUPPOFFER_SRCSUPPOFFERITEM FOREIGN KEY (SUPPLYOFFERID, COMPANYID)
      REFERENCES SRC_SUPPLYOFFER (SUPPLYOFFERID, COMPANYID);

ALTER TABLE SRC_SUPPLYOFFERITEM
   ADD CONSTRAINT RSCSUPPREQITEM_RSCOFFERITEM FOREIGN KEY (SUPPLYREQUESTITEMID, COMPANYID)
      REFERENCES SRC_SUPPLYREQUESTITEM (SUPPLYREQUESTITEMID, COMPANYID);

ALTER TABLE SRC_SUPPLYOFFERITEM
   ADD CONSTRAINT INV_ITEM_SUPPOFFERITEM FOREIGN KEY (INVITEMID, COMPANYID, INVITEMFYEARID)
      REFERENCES INV_ITEM (INVITEMID, COMPANYID, FYEARID);

ALTER TABLE SRC_SUPPLYOFFERITEM
   ADD CONSTRAINT UNITOFMEASURE_SRCSUPPOFERITEM FOREIGN KEY (UNITOFMEASUREID, COMPANYID, UNITOFMEASUREFYEARID)
      REFERENCES INV_UNITOFMEASURE (UNITOFMEASUREID, COMPANYID, FYEARID);


CREATE TABLE SRC_SUPPLYREQUESTDOCUMENT  (
   SUPPLYREQUESTDOCUMENTID NUMBER(38) NOT NULL,
   COMPANYID            NUMBER(38) NOT NULL,
   SUPPLYREQUESTID      NUMBER(38) NOT NULL,
   SUPPLYOFFERID        NUMBER(38) NOT NULL,
   SUPPLYREQUESTITEMID  NUMBER(38) NOT NULL,
   SUPPLYOFFERITEMID    NUMBER(38) NOT NULL,
   DESCR                VARCHAR2(50) NOT NULL,
   PATH                 VARCHAR2(100),
   COMMENTS             VARCHAR2(200),
   OBJECTVALUE          BLOB
);

ALTER TABLE SRC_SUPPLYREQUESTDOCUMENT
   ADD CONSTRAINT PK_SRC_SUPPLYREQUESTDOCUMENT PRIMARY KEY (SUPPLYREQUESTDOCUMENTID, COMPANYID);

ALTER TABLE SRC_SUPPLYREQUESTDOCUMENT
   ADD CONSTRAINT SRCSUPPREQ_SRCSUPPREQDOC FOREIGN KEY (SUPPLYREQUESTID, COMPANYID)
      REFERENCES SRC_SUPPLYREQUEST (SUPPLYREQUESTID, COMPANYID);

ALTER TABLE SRC_SUPPLYREQUESTDOCUMENT
   ADD CONSTRAINT SRCSUPPOFFER_SRCSUPPREQDOC FOREIGN KEY (SUPPLYOFFERID, COMPANYID)
      REFERENCES SRC_SUPPLYOFFER (SUPPLYOFFERID, COMPANYID);

ALTER TABLE SRC_SUPPLYREQUESTDOCUMENT
   ADD CONSTRAINT SRCSUPPREQITEM_SRCSUPPREQDOC FOREIGN KEY (SUPPLYREQUESTITEMID, COMPANYID)
      REFERENCES SRC_SUPPLYREQUESTITEM (SUPPLYREQUESTITEMID, COMPANYID);

ALTER TABLE SRC_SUPPLYREQUESTDOCUMENT
   ADD CONSTRAINT SRCSUPPOFFERITEM_SUPPREQDOC FOREIGN KEY (SUPPLYOFFERITEMID, COMPANYID)
      REFERENCES SRC_SUPPLYOFFERITEM (SUPPLYOFFERITEMID, COMPANYID);


CREATE TABLE SRC_COMMITEE  (
   COMMITEEID           NUMBER(38) NOT NULL,
   COMPANYID            NUMBER(38) NOT NULL,
   SUPPLYREQUESTID      NUMBER(38) NOT NULL,
   COMMITEEINDICATOR    NUMBER(38) NOT NULL,
   DESCR                VARCHAR2(50) NOT NULL,
   BOARDDECISIONNO      VARCHAR2(20),
   VALIDSINCEDATE       DATE,
   VALIDTILLDATE        DATE,
   COMMENTS             VARCHAR2(200)
);

ALTER TABLE SRC_COMMITEE
   ADD CONSTRAINT PK_SRC_COMMITEE PRIMARY KEY (COMMITEEID, COMPANYID);

ALTER TABLE SRC_COMMITEE
   ADD CONSTRAINT SRCSUPPREQ_SRCCOMITEE FOREIGN KEY (SUPPLYREQUESTID, COMPANYID)
      REFERENCES SRC_SUPPLYREQUEST (SUPPLYREQUESTID, COMPANYID);

CREATE TABLE SRC_COMMITEEMEMBER  (
   COMMITEEID           NUMBER(38) NOT NULL,
   COMPANYID            NUMBER(38) NOT NULL,
   LINENUM              NUMBER(38) NOT NULL,
   NAME                 VARCHAR2(50) NOT NULL,
   ROLE                 VARCHAR2(50) NOT NULL,
   COMMENTS             VARCHAR2(200)
);

ALTER TABLE SRC_COMMITEEMEMBER
   ADD CONSTRAINT PK_SRC_COMMITEEMEMBER PRIMARY KEY (COMMITEEID, COMPANYID);

ALTER TABLE SRC_COMMITEEMEMBER
   ADD CONSTRAINT SRCCOMITEE_MEMBER FOREIGN KEY (COMMITEEID, COMPANYID)
      REFERENCES SRC_COMMITEE (COMMITEEID, COMPANYID);


CREATE TABLE SRC_EVALUATIONCRITERIA  (
   EVALUATIONCRITERIAID NUMBER(38) NOT NULL,
   COMPANYID            NUMBER(38) NOT NULL,
   SUPPLYREQUESTID      NUMBER(38) NOT NULL,
   SUPPLYREQUESTITEMID  NUMBER(38),
   LINENUM              NUMBER(38) NOT NULL,
   DESCR                VARCHAR2(200) NOT NULL,
   WEIGHT               NUMBER(38) NOT NULL,
   COMMENTS             VARCHAR2(200)
);

ALTER TABLE SRC_EVALUATIONCRITERIA
   ADD CONSTRAINT PK_SRC_EVALUATIONCRITERIA PRIMARY KEY (EVALUATIONCRITERIAID, COMPANYID);

ALTER TABLE SRC_EVALUATIONCRITERIA
   ADD CONSTRAINT SRCSUPPREQ_SRCEVALUATION FOREIGN KEY (SUPPLYREQUESTID, COMPANYID)
      REFERENCES SRC_SUPPLYREQUEST (SUPPLYREQUESTID, COMPANYID);

ALTER TABLE SRC_EVALUATIONCRITERIA
   ADD CONSTRAINT SRCSUPPREQITEM_SRCEVALUATION FOREIGN KEY (SUPPLYREQUESTITEMID, COMPANYID)
      REFERENCES SRC_SUPPLYREQUESTITEM (SUPPLYREQUESTITEMID, COMPANYID);


CREATE TABLE SRC_OFFEREVALUATION  (
   OFFEREVALUATIONID    NUMBER(38) NOT NULL,
   COMPANYID            NUMBER(38) NOT NULL,
   SUPPLYREQUESTID      NUMBER(38) NOT NULL,
   SUPPLYOFFERID        NUMBER(38) NOT NULL,
   SUPPLYOFFERITEMID    NUMBER(38),
   CRITERIALINENUM      NUMBER(38) NOT NULL,
   SCORE                FLOAT(126) NOT NULL,
   COMMENTS             VARCHAR2(200),
   EVALUATIONCRITERIAID NUMBER(38) NOT NULL
);

ALTER TABLE SRC_OFFEREVALUATION
   ADD CONSTRAINT PK_SRC_OFFEREVALUATION PRIMARY KEY (OFFEREVALUATIONID, COMPANYID);

ALTER TABLE SRC_OFFEREVALUATION
   ADD CONSTRAINT SRCSUPPREQ_SRCOFFEREVAL FOREIGN KEY (SUPPLYREQUESTID, COMPANYID)
      REFERENCES SRC_SUPPLYREQUEST (SUPPLYREQUESTID, COMPANYID);

ALTER TABLE SRC_OFFEREVALUATION
   ADD CONSTRAINT SRCSUPPOFER_SRCOFFEREVAL FOREIGN KEY (SUPPLYOFFERID, COMPANYID)
      REFERENCES SRC_SUPPLYOFFER (SUPPLYOFFERID, COMPANYID);

ALTER TABLE SRC_OFFEREVALUATION
   ADD CONSTRAINT SRCEVALUATION_SRCOFFEREVAL FOREIGN KEY (EVALUATIONCRITERIAID, COMPANYID)
      REFERENCES SRC_EVALUATIONCRITERIA (EVALUATIONCRITERIAID, COMPANYID);

ALTER TABLE SRC_OFFEREVALUATION
   ADD CONSTRAINT SRCSUPPOFFERITEM_SRCOFFEREVAL FOREIGN KEY (SUPPLYOFFERITEMID, COMPANYID)
      REFERENCES SRC_SUPPLYOFFERITEM (SUPPLYOFFERITEMID, COMPANYID);

CREATE TABLE SRC_OFFERRANKING  (
   OFFERRANKINGID       NUMBER(38) NOT NULL,
   COMPANYID            NUMBER(38) NOT NULL,
   SUPPLYREQUESTID      NUMBER(38) NOT NULL,
   SUPPLYOFFERID        NUMBER(38) NOT NULL,
   SUPPLYOFFERITEMID    NUMBER(38),
   PRICETOSCOREFRACTION FLOAT(126),
   RANKING              NUMBER(38) NOT NULL,
   ISASSIGNED           VARCHAR2(1) NOT NULL,
   INVITEMID            NUMBER(38),
   INVITEMFYEARID       NUMBER(38),
   PRICE                FLOAT(126),
   DISC                 FLOAT(126),
   QUAASSIGNED          FLOAT(126),
   UNITOFMEASUREID      NUMBER(38),
   UNITOFMEASUREFYEARID NUMBER(38)
);

ALTER TABLE SRC_OFFERRANKING
   ADD CONSTRAINT PK_SRC_OFFERRANKING PRIMARY KEY (OFFERRANKINGID, COMPANYID);

ALTER TABLE SRC_OFFERRANKING
   ADD CONSTRAINT SRCSUPPREQ_SRCOFFERRANK FOREIGN KEY (SUPPLYREQUESTID, COMPANYID)
      REFERENCES SRC_SUPPLYREQUEST (SUPPLYREQUESTID, COMPANYID);

ALTER TABLE SRC_OFFERRANKING
   ADD CONSTRAINT SRCSUPPPOFFER_SRCOFFERRANK FOREIGN KEY (SUPPLYOFFERID, COMPANYID)
      REFERENCES SRC_SUPPLYOFFER (SUPPLYOFFERID, COMPANYID);

ALTER TABLE SRC_OFFERRANKING
   ADD CONSTRAINT SRCSUPPOFFERITEM_SRCOFFERRANK FOREIGN KEY (SUPPLYOFFERITEMID, COMPANYID)
      REFERENCES SRC_SUPPLYOFFERITEM (SUPPLYOFFERITEMID, COMPANYID);

ALTER TABLE SRC_OFFERRANKING
   ADD CONSTRAINT INVITEM_SRCOFFERRANK FOREIGN KEY (INVITEMID, COMPANYID, INVITEMFYEARID)
      REFERENCES INV_ITEM (INVITEMID, COMPANYID, FYEARID);

ALTER TABLE SRC_OFFERRANKING
   ADD CONSTRAINT UNITOFMEASURE_SRCOFFERRANK FOREIGN KEY (UNITOFMEASUREID, COMPANYID, UNITOFMEASUREFYEARID)
      REFERENCES INV_UNITOFMEASURE (UNITOFMEASUREID, COMPANYID, FYEARID);


alter table inv_transheader add supplyrequestid number(38);
alter table inv_transheader add constraint src_supplyrequest_transheader 
  foreign key (supplyrequestid, companyid) references src_supplyrequest (supplyrequestid, companyid);
alter table inv_contractheader add supplyrequestid number(38);
alter table inv_contractheader add constraint src_supplyrequest_contract
  foreign key (supplyrequestid, companyid) references src_supplyrequest (supplyrequestid, companyid);
